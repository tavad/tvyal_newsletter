---
title: "Tvyal Newsletter"
author: "Aghasi Tavadyan"
date: "2024-03-15"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(rvest)
library(RcppRoll)
library(scales)
library(readxl)

rm(list = ls()); gc()

theme_tvyal <- function(base_size = 12, base_family = "sans")
{
  colors <- deframe(ggthemes::ggthemes_data[["fivethirtyeight"]])
  (ggthemes::theme_foundation(
    base_size = base_size, base_family = base_family) +
      theme(
        line = element_line(colour = "black"),
        rect = element_rect(fill = "white", linetype = 0, colour = NA),
        text = element_text(colour = colors["Dark Gray"]),
        # axis.title = element_blank(),
        # axis.text = element_text(),
        axis.ticks = element_blank(),
        axis.line = element_blank(),
        legend.background = element_rect(),
        legend.position = "bottom",
        legend.direction = "horizontal",
        legend.box = "vertical",
        panel.grid = element_line(colour = NULL),
        panel.grid.major.x = element_line(
          colour = colors["Medium Gray"], 
          linetype = "dotted"
        ),
        panel.grid.major.y = element_line(
          colour = colors["Medium Gray"], 
          linetype = "dotted"
        ),
        panel.grid.minor = element_blank(),
        plot.title = element_text(hjust = 0, size = rel(1.5), face = "bold"),
        plot.margin = unit(c(1, 1, 1, 1), "lines"), strip.background = element_rect()
      )
  )
}

theme_set(theme_tvyal())

save_last_plot <-
  function(filename, extension = "png", width = 1008, height = 567) {

    filename <- str_replace_all(filename, " ", "_")
    last_plot <- recordPlot()

    if (extension == "png") {
      png(paste0(filename, ".", extension), width = width, height = height)
    } else if (extension == "pdf") {
      pdf(paste0(filename, ".", extension), width = width, height = height)
    } else {
      stop("Unsupported file extension. Use 'png' or 'pdf'.")
    }

    replayPlot(last_plot)
    dev.off()
    paste0(filename, ".", extension)
  }

new_palette_colors <- c(
  "#003f5c", "#2f4b7c", "#665191", "#a05195",
  "#d45087", "#f95d6a", "#ff7c43", "#ffa600"
)
colfunc <- colorRampPalette(c("#2f4b7c", "#fffcf5", "#f95d6a"))
colfunc2 <- colorRampPalette(new_palette_colors)
colfunc3 <- colorRampPalette(c("#005C4B", new_palette_colors, "#FFD17A", "#FFFCF5"))

update_geom_defaults("rect", list(fill  = new_palette_colors[2], alpha = 0.8))
update_geom_defaults("line", list(color = new_palette_colors[2], alpha = 0.8))
update_geom_defaults("area", list(fill  = new_palette_colors[2], alpha = 0.8))

caption_arm <-  "’Ä’•’≤’´’∂’°’Ø` ‘±’≤’°’Ω’´ ‘π’°’æ’°’§’µ’°’∂   |   tvyal.com   |   tavadyan.com"
caption_eng <-  "Author: Aghasi Tavadyan   |   tvyal.com   |   tavadyan.com"

doParallel::registerDoParallel(cores = 8)

Sys.setlocale("LC_TIME", "hy_AM.UTF-8")

setwd(dirname(rstudioapi::getActiveDocumentContext()$path))

```

```{r downloading economic activity data, include=FALSE}
national_account_urls <- 
  read_html("https://www.armstat.am/am/?nid=202") |> 
  html_elements("a")

national_account_urls <- 
  tibble(
    url =  national_account_urls |>
      html_attr("href") |> 
      str_replace("../", "https://www.armstat.am/"),
    text = national_account_urls |>
      html_text()
  )

economic_activity_url <- 
  national_account_urls |> 
  filter(grepl("’°’Ø’ø’´’æ’∏÷Ç’©’µ’°’∂ ÷Å’∏÷Ç÷Å’°’∂’´’∑’®", text)) |> 
  pull(url)

economic_activity <- 
  rio::import(economic_activity_url, format = "xls", sheet = 5, skip = 6) %>%
  as_tibble()

activity_colnames <- c("year", "month", "iea", "iea_adjusted")

economic_activity <- 
  economic_activity[,c(1,3,5,6)] %>% #Chain-link indices with seasonal adjustment (2021=100%)
  set_names(activity_colnames) %>% 
  fill(year, .direction = "down") %>% 
  filter(!is.na(year)) %>% 
  mutate(date = ym(paste(year, month))) %>% 
  hablar::retype() |> 
  mutate(
    growth_month = iea / lag(iea),
    growth_adjusted_month = iea_adjusted / lag(iea_adjusted),
    growth_year = iea / lag(iea, n = 12),
    growth_adjusted_year = iea_adjusted / lag(iea_adjusted, n = 12)
  ) |> 
  bind_rows(
    tibble(
      year = 2024,
      month = "February",
      date = ym("2024-02"),
      growth_year = 1.163
    )
  )

economic_activity |> write_csv("economic_activity_celan.csv")
```



```{r, include=FALSE}

economic_activity_change_plot <- 
  economic_activity %>% 
  select(date, growth_adjusted_year, growth_year) |> 
  pivot_longer(c(growth_adjusted_year, growth_year)) |> 
  mutate(
    date = date + months(1) - days(1),
    name = ifelse(
      grepl("adjusted", name), 
      "12-’°’¥’Ω’µ’° ’´’∂’§’•÷Ñ’Ω ’Ω’•’¶’∏’∂’°’µ’´’∂ ’≥’∑’£÷Ä’ø’∏÷Ç’¥’∏’æ", 
      "12-’°’¥’Ω’µ’° ’´’∂’§’•÷Ñ’Ω"
    )
  ) |> 
  # na.omit() |> 
  filter(date >= ym("2018-01")) |> 
  ggplot(aes(date, value - 1, color = name)) +
  geom_line(size = 1.2, alpha = 0.8) +
  geom_smooth() +
  # geom_line(aes(date, growth_adjusted_month)) +
  # geom_line(aes(date, growth_month), color = "red") +
  scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
  scale_y_continuous(labels = percent_format()) +
  scale_color_manual(values = new_palette_colors[c(3,6)]) +
  labs(
    x = NULL,
    y = NULL,
    color = NULL,
    title = "’è’∂’ø’•’Ω’°’Ø’°’∂ ’°’Ø’ø’´’æ’∏÷Ç’©’µ’°’∂ ÷Å’∏÷Ç÷Å’°’∂’´’∑’´ (’è‘±’ë) ÷É’∏÷É’∏’≠’∏÷Ç’©’µ’∏÷Ç’∂’®",
    subtitle = "12-’°’¥’Ω’µ’° ’Ø’ø÷Ä’æ’°’Æ÷Ñ’∏’æ, ’∂’°’≠’∏÷Ä’§ ’ø’°÷Ä’æ’° ’∂’∏÷Ç’µ’∂ ’°’¥’Ω’æ’° ’∞’°’¥’•’¥’°’ø",
    caption =  paste(caption_arm, "   |   ’è’æ’µ’°’¨’∂’•÷Ä’´ ’°’≤’¢’µ’∏÷Ç÷Ä’ù armstat.am")
  )

```



```{r second plot, include=FALSE}

economic_activity_last_2_years_comparation_plot <- 
  economic_activity |> 
  # filter(year >= max(year) - 1) |> 
  filter(year %in% c(2022:2023)) |>
  group_by(year) |> 
  mutate(
    month = month(date),
    cum_growth = cumprod(growth_adjusted_month)
  ) |> 
  ggplot(aes(
    ym(paste(2000, month)),
    growth_adjusted_year - 1, 
    fill = as.character(year),
    label = percent(growth_adjusted_year - 1, accuracy = 0.1),
  )) +
  geom_col(position = position_dodge2(preserve = "single")) +
  geom_text(aes(y = growth_adjusted_year - 0.99), position = position_dodge(width = 28)) +
  geom_line(aes(y = cum_growth - 1, color = as.character(year)), size = 1.5) +
  scale_x_date(date_breaks = "1 month", date_labels = "%b") +
  scale_y_continuous(labels = percent_format()) +
  scale_fill_manual(values = new_palette_colors[c(2,6)]) +
  scale_color_manual(values = new_palette_colors[c(1,5)]) +
  labs(
    x = NULL,
    y = NULL,
    color = NULL,
    fill = NULL,
    title = "’è’∂’ø’•’Ω’°’Ø’°’∂ ’°’Ø’ø’´’æ’∏÷Ç’©’µ’°’∂ ÷Å’∏÷Ç÷Å’°’∂’´’∑’® 2022 2023 ’©’æ’°’Ø’°’∂’∂’•÷Ä’´’∂",
    subtitle = "’∂’°’≠’∏÷Ä’§ ’ø’°÷Ä’æ’° ’∂’∏÷Ç’µ’∂ ’°’¥’Ω’æ’° ’∞’°’¥’•’¥’°’ø, ’≥’∑’£÷Ä’ø’æ’°’Æ",
    caption =  paste(caption_arm, "   |   ’è’æ’µ’°’¨’∂’•÷Ä’´ ’°’≤’¢’µ’∏÷Ç÷Ä’ù armstat.am")
  ) +
  theme(
    panel.grid.major.x = element_blank(),
    panel.grid.major.y = element_blank(),
    axis.text.y = element_blank()
  )

```


***English summary below.***

’Ä’°÷Ä’£’•’¨’´ ’£’∏÷Ä’Æ’®’∂’Ø’•÷Ä,

’Ä’∏÷Ç’Ω’∏’æ ’•’¥ ’¨’°’æ ’•÷Ñ:
’Ü’•÷Ä’Ø’°’µ’°÷Å’∂’∏÷Ç’¥ ’•’¥ ’°’µ’Ω ’∑’°’¢’°’©’æ’° ’æ’•÷Ä’¨’∏÷Ç’Æ’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä’® ÷á ’°’∑’≠’°’ø’°’∂÷Ñ’∂’•÷Ä’®.


## üöúüåæüìâ  10 ’ø’°÷Ä’æ’° ’£’µ’∏÷Ç’≤’°’ø’∂’ø’•’Ω’∏÷Ç’©’µ’°’∂ ’Ø’∏’¨’°÷É’Ω’®

### ‘≥’µ’∏÷Ç’≤’°’ø’∂’ø’•’Ω’∏÷Ç’©’µ’∏÷Ç’∂’´÷Å ’Ω’°’∫’°’º’∏’≤’°’Ø’°’∂ ’ø’∂’ø’•’Ω’∏÷Ç’©’µ’°’∂ ’°’∂÷Å’∏÷Ç’¥’®




**‘≥’Æ’°’∫’°’ø’Ø’•÷Ä 1.**  

```{r, echo=FALSE, warning=FALSE, message=FALSE, fig.width = 12, fig.height = 8}
economic_activity_change_plot
```




**‘≥’Æ’°’∫’°’ø’Ø’•÷Ä 2.** 

```{r, echo=FALSE, warning=FALSE, fig.width = 12, fig.height = 8}
economic_activity_last_2_years_comparation_plot
```




**‘≥’Æ’°’∫’°’ø’Ø’•÷Ä 3.** 

```{r, echo=FALSE, warning=FALSE, fig.width = 12, fig.height = 8}
# biggest_growth_plot
```

>
> ‘ø’°÷Ä’§’°÷Å’•÷Ñ ’©’• ’∏÷Ä ’≥’µ’∏÷Ç’≤’•÷Ä’∂ ’•’∂ ’∂’∫’°’Ω’ø’∏÷Ç’¥ ’ø’∂’ø’•’Ω’°’Ø’°’∂ ’°’≥’´’∂‚Ä§
>
> [üá¶üá≤üìäüèóÔ∏è ’Ä’°’µ’°’Ω’ø’°’∂’´ 2023’©‚Ä§ 8.7% ’ø’∂’ø’•’Ω’°’Ø’°’∂ ’°’≥’´ ’∞’´’¥’∂’°’Ø’°’∂ ’∫’°’ø’≥’°’º’∂’•÷Ä’®](https://www.tvyal.com/newsletter/2024/2024_03_09)÷â
>




## ‘∂‘º’Ñ ’∞’°’≤’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä

[‘¥’´’ø’•÷Ñ ’Ü’æ’•÷Ä ’Ñ’∂’°÷Å’°’Ø’°’∂’µ’°’∂’´’∂ ’ø’æ’°’Æ ’´’¥ ’æ’•÷Ä’ª’´’∂ ’∞’°÷Ä÷Å’°’¶÷Ä’∏÷Ç’µ÷Å’®, ’∏÷Ä’ø’•’≤ ’≠’∏’Ω’∏÷Ç’¥ ’•’¥ 2024 ’©’æ’°’Ø’°’∂’´ ’ø’∂’ø’•’Ω’°’Ø’°’∂ ’¥’°÷Ä’ø’°’∞÷Ä’°’æ’•÷Ä’∂’•÷Ä’´ ’¥’°’Ω’´’∂÷â](https://www.youtube.com/watch?v=4ZI-fFFxr7k)

’Ä’°÷Ä÷Å’°’¶÷Ä’∏÷Ç’µ÷Å’∏÷Ç’¥ ’∑’∏’∑’°÷É’æ’•’¨ ’•’∂ ’∞’•’ø÷á’µ’°’¨ ’©’•’¥’°’∂’•÷Ä’®÷â

* ‘µ÷Ä÷á’°’∂’® ’Ñ’∏’Ω’Ø’æ’°’µ’´÷Å ’°’æ’•’¨’´ ’©’°’∂’Ø ’ß÷Ä 2023 ’©’æ’°’Ø’°’∂’´ ’°’¥’º’°’∂’®
* ’é’•÷Ä’°’¢’∂’°’Ø’æ’∏’≤’∂’•÷Ä’® ’¨÷Ñ’∏÷Ç’¥ ’•’∂ ’Ä’°’µ’°’Ω’ø’°’∂’®
* ’á’´’∂’°÷Ä’°÷Ä’°’Ø’°’∂ ’¢’∏÷Ç’¥ ’Ä’°’µ’°’Ω’ø’°’∂’∏÷Ç’¥’ù ’Ø’°’º’°’æ’°÷Ä’∏÷Ç’©’µ’∏÷Ç’∂’® ’Ø÷Ä’Ø’∂’∏÷Ç’¥ ’ß ’î’∏’π’°÷Ä’µ’°’∂’´ ’Ω’≠’°’¨’∂’•÷Ä’®
* ‘ª’û’∂’π ’°’º’°’æ’•’¨’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä ’Ø’ø’° ‘µ’æ÷Ä’∏’∫’°’Ø’°’∂ ’∏÷Ç’≤’´’∂ ’Ä’°’µ’°’Ω’ø’°’∂’´ ’ø’∂’ø’•’Ω’∏÷Ç’©’µ’°’∂ ’∞’°’¥’°÷Ä


<a href="https://www.youtube.com/watch?v=4ZI-fFFxr7k">
  <img src="https://i3.ytimg.com/vi/4ZI-fFFxr7k/hqdefault.jpg" alt="YouTube Video" style="width:60%;">
</a>


## English Summary

### üöúüåæüìâÔ∏è 10 years of agricultural collapse



---

‘±’µ’Ω ’æ’•÷Ä’¨’∏÷Ç’Æ’∏÷Ç’©’µ’∏÷Ç’∂’® ’°’º’Ø’° ’ß ’∂’°÷á [’¥’•÷Ä ’Ø’°’µ÷Ñ’ß’ª’∏÷Ç’¥](https://www.tvyal.com/newsletter/2024/2024_03_15), ’°’µ’Ω ’æ’•÷Ä’¨’∏÷Ç’Æ’∏÷Ç’©’µ’°’∂ ’Ø’∏’§’® ÷á ’ø’æ’µ’°’¨’∂’•÷Ä’® ’§÷Ä’æ’°’Æ ’•’∂ ’∂’°÷á [Github-’∏÷Ç’¥](https://github.com/tavad/tvyal_newsletter)÷â       

---                  

‘µ’©’• ’∞’∂’°÷Ä’°’æ’∏÷Ä ’ß, ’≠’∂’§÷Ä’∏÷Ç’¥ ’•’¥ ’°’µ’Ω ’∂’µ’∏÷Ç’©’® ’∏÷Ç’≤’°÷Ä’Ø’•’¨ ’∂’°÷á ’°’µ’∂ ’¥’°÷Ä’§’Ø’°’∂÷Å, ’∏÷Ç’¥ ’°’µ’∂ ’Ø’°÷Ä’Æ’∏÷Ç’¥ ’•÷Ñ ’Ø’°÷Ä’∏’≤ ’ß ’∞’•’ø’°÷Ñ÷Ä÷Ñ÷Ä’•’¨:

’ç’∫’°’Ω’•÷Ñ ’∞’°’ª’∏÷Ä’§ ’∞’°’≤’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’°’∂’® ’∞’°’ª’∏÷Ä’§ ’∏÷Ç÷Ä’¢’°’© ÷Ö÷Ä’®:      


’Ä’°÷Ä’£’°’∂÷Ñ’∂’•÷Ä’∏’æ,            
‘±’≤’°’Ω’´ ‘π’°’æ’°’§’µ’°’∂         
15.03.2024          
[tvyal.com](https://www.tvyal.com/)      
[tavadyan.com](https://www.tavadyan.com/)

---

[Was this email forwarded to you? Subscribe here.](https://www.tvyal.com/subscribe)

[‘≤’°’™’°’∂’∏÷Ä’§’°’£÷Ä’æ’•÷Ñ](https://www.tvyal.com/subscribe)

       
---              
               


####### **’à÷Ç’∑’°’§÷Ä’∏÷Ç’©’µ’∏÷Ç’∂. ’Å’•÷Ä ’ß’¨.÷É’∏’Ω’ø’® ’¥’•’µ’¨’´’Ω’©’´ ’¥’•’ª ’ß, ’∏÷Ä’´ ’¥’´’ª’∏÷Å’∏’æ ’•’Ω ’Ø’´’Ω’æ’∏÷Ç’¥ ’•’¥ ’∑’°’¢’°’©’°’Ø’°’∂ ’∂’µ’∏÷Ç’©’•÷Ä, ’∏÷Ä’∏’∂÷Ñ ’∞’´’¥’∂’°’Ø’°’∂’∏÷Ç’¥ ’∂’•÷Ä’Ø’°’µ’°÷Å’∂’∏÷Ç’¥ ’•’∂ ’Ä’°’µ’°’Ω’ø’°’∂’´ ’ø’∂’ø’•’Ω’∏÷Ç’©’µ’°’∂’®: ’Ü’µ’∏÷Ç’©’•÷Ä’® ’∂’•÷Ä’°’º’∏÷Ç’¥ ’•’∂ ’£’Æ’°’∫’°’ø’Ø’•÷Ä’∂’•÷Ä, [’ø’æ’µ’°’¨’∂’•÷Ä’´ ’¢’°’¶’°’∂’•÷Ä](https://github.com/tavad/tvyal_newsletter), ’ø’•’Ω’°’∂’µ’∏÷Ç’©’•÷Ä, ’∞’∏’§’æ’°’Æ’∂’•÷Ä, [’°’º÷Å’°’∂÷Å ’æ’°’∞’°’∂’°’Ø’∂’•÷Ä](https://www.tvyal.com/projects), ’ø’∂’ø’•’Ω’°’Ø’°’∂ ’£’∏÷Ä’Æ’´÷Ñ’∂’•÷Ä, ’Ø’°’∂’≠’°’ø’•’Ω’∏÷Ç’¥’∂’•÷Ä ÷á ’∞’°’∑’æ’•’ø’æ’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä: ‘µ’©’• ÷Å’°’∂’Ø’°’∂’∏÷Ç’¥ ’•÷Ñ ’π’•’≤’°÷Ä’Ø’•’¨ ’¢’°’™’°’∂’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂’®, ’≠’∂’§÷Ä’∏÷Ç’¥ ’•’¥ ’ø’•’≤’•’Ø’°÷Å÷Ä’•÷Ñ ’´’∂’±, ÷á ’•’Ω ’Ø’∞’•’º’°÷Å’∂’•’¥ ’±’•÷Ä ’ß’¨. ÷É’∏’Ω’ø’® ÷Å’∏÷Ç÷Å’°’Ø’´÷Å: ‘≥÷Ä’•÷Ñ ’∂’°÷á ’•’©’• ’∏÷Ç’∂’•÷Ñ ’¥’•’∂’Ø’∂’°’¢’°’∂’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä:**

####### **Important! Your email is part of the mailing list where I share weekly materials primarily focused on the Armenian economy. These materials encompass charts, [databases](https://github.com/tavad/tvyal_newsletter), videos, articles, [online dashboards](https://www.tvyal.com/projects), economic tools, forecasts, and reports. If you wish to unsubscribe, please let me know, and I will remove your email from the list. Please share your comments as well‚Ä§**





